[
  {
    "id": "meiling_bloodfm",
    "type": "SPELL",
    "name": { "str": "Blood flow manipulation" },
    "description": "Concentrate to manipulate your blood pressure, stopping bleeding wounds.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "remove_effect",
    "effect_str": "bleed",
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": 1,
    "max_damage": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 366,
    "base_energy_cost": 133,
    "energy_source": "MANA",
    "flags": [ "CONCENTRATE", "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "meiling_mountainbreak",
    "type": "SPELL",
    "name": { "str": "Mountain breaking cannon" },
    "description": "Prepare your entire body in order to deal massive damage to an enemy after parrying an attack.  The attack will have no effect if you don't parry immediately after using it.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "meiling_mountainbreak_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "You prepare yourself…",
    "base_casting_time": 66,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "meiling_mountainbreak2",
    "type": "SPELL",
    "name": { "str": "Mountain breaking cannon (dmg)" },
    "description": "Damage component for meiling_mountainbreak ",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "bash",
    "min_damage": { "math": [ "( (u_skill('swimming') * 6.4 ) + (u_skill('melee') * 6.4 ) + (u_skill('unarmed') * 6.4 ) - 3.2 )" ] },
    "max_damage": 240,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "message": "You strike back!",
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "min dmg 48",
    "//2": "All Meiling spells calculate the max skill as (10 + 14 + 14)/3"
  },
  {
    "id": "meiling_qiblast",
    "type": "SPELL",
    "name": { "str": "Qi blast" },
    "description": "Thrust your palms forward, releasing qi in front of you and through your enemies.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "line",
    "damage_type": "soul",
    "min_damage": { "math": [ "( ( (u_skill('swimming') * 1.17 ) + (u_skill('melee') * 1.17 ) + (u_skill('unarmed') * 1.17 ) + 25.64 ) * 0.75 )" ] },
    "max_damage": { "math": [ "( ( (u_skill('swimming') * 1.17 ) + (u_skill('melee') * 1.17 ) + (u_skill('unarmed') * 1.17 ) + 25.64 ) * 1.25 )" ] },
    "min_pierce": { "math": [ "( (u_skill('swimming') * 0.47 ) + (u_skill('melee') * 0.47 ) + (u_skill('unarmed') * 0.47 ) + 0.24 )" ] },
    "max_pierce": 18,
    "min_range": 2,
    "max_range": 2,
    "min_aoe": 2,
    "max_aoe": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 50,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//": "Same as the tec version, castable at will by the player"
  },
  {
    "id": "meiling_qiblast2",
    "type": "SPELL",
    "name": { "str": "Qi blast (tec)" },
    "description": "Damage component for tec_meiling_qiblast ",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "line",
    "damage_type": "soul",
    "min_damage": { "math": [ "( ( (u_skill('swimming') * 1.17 ) + (u_skill('melee') * 1.17 ) + (u_skill('unarmed') * 1.17 ) + 25.64 ) * 0.75 )" ] },
    "max_damage": { "math": [ "( ( (u_skill('swimming') * 1.17 ) + (u_skill('melee') * 1.17 ) + (u_skill('unarmed') * 1.17 ) + 25.64 ) * 1.25 )" ] },
    "min_pierce": { "math": [ "( (u_skill('swimming') * 0.47 ) + (u_skill('melee') * 0.47 ) + (u_skill('unarmed') * 0.47 ) + 0.24 )" ] },
    "max_pierce": 18,
    "min_range": 2,
    "max_range": 2,
    "min_aoe": 2,
    "max_aoe": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//": "max dmg 35 - 70 with ± 25% variance, min pierce 6",
    "//2": "Should have an 'inverted cone' shape"
  },
  {
    "id": "meiling_qiheal",
    "type": "SPELL",
    "name": { "str": "Qi heal" },
    "description": "Focus your qi on yourself or a friendly target, restoring HP over time.",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "affected_body_parts": [ "arm_l", "arm_r", "head", "leg_l", "leg_r", "torso" ],
    "effect": "attack",
    "effect_str": "meiling_qiheal_effect",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_skill('swimming') * 33 ) + ( max( u_skill('melee'), u_skill('unarmed') ) * 33 ) + (u_skill('firstaid') * 33 ) + 568 )" ] },
    "max_duration": 1700,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 333,
    "base_energy_cost": 133,
    "energy_source": "MANA",
    "flags": [ "CONCENTRATE", "NO_LEGS", "SOMATIC" ],
    "//": "Adds the heal effect, which intermitently casts the spell below (each 1 s)",
    "//2": "Formula tl;dr it picks the larger value between (melee or unarmed) + athletics + firstaid, and uses it to calculate the duration",
    "//3": "min dur 700"
  },
  {
    "id": "meiling_qiheal2",
    "type": "SPELL",
    "name": { "str": "Qi heal (heal effect)" },
    "description": "Heal component of meiling_qiheal ",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": -2,
    "max_damage": -2,
    "max_level": 1,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "meiling_qipunch",
    "type": "SPELL",
    "name": { "str": "Qi punch" },
    "description": "Overcharge your fist with qi and punch your enemy, sending it flying away.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "meiling_qipunch2" } ],
    "shape": "blast",
    "damage_type": "bash",
    "min_damage": { "math": [ "( (u_skill('swimming') * 2.7 ) + (u_skill('melee') * 2.7 ) + (u_skill('unarmed') * 2.7 ) + 5.4 )" ] },
    "max_damage": 108,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 85,
    "base_energy_cost": 125,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "NO_PROJECTILE", "SOMATIC" ]
  },
  {
    "id": "meiling_qipunch2",
    "type": "SPELL",
    "name": { "str": "Qi punch (stun)" },
    "description": "Stun component for meiling_qipunch . This is a qol buff so the targets don't immediately move again after the knockback",
    "spell_class": "NONE",
    "valid_targets": [ "hostile" ],
    "effect": "mod_moves",
    "extra_effects": [ { "id": "meiling_qipunch3" } ],
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": -100,
    "max_damage": -100,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "meiling_qipunch3",
    "type": "SPELL",
    "name": { "str": "Qi punch (knockback)" },
    "description": "Knockback component of meiling_qipunch ",
    "spell_class": "NONE",
    "valid_targets": [ "hostile" ],
    "effect": "directed_push",
    "shape": "blast",
    "damage_type": "bash",
    "min_damage": { "math": [ "( (u_skill('swimming') * 0.1 ) + (u_skill('melee') * 0.1 ) + (u_skill('unarmed') * 0.1 ) + 1.2 )" ] },
    "max_damage": 5,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "NO_PROJECTILE", "RANDOM_DAMAGE", "SILENT" ]
  },
  {
    "id": "meiling_redrelease",
    "type": "SPELL",
    "name": { "str": "Red energy release" },
    "description": "Gather nearby earth qi to empower yourself, dealing minor damage to a targeted creature, but greatly damaging terrain.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "meiling_redrelease2" } ],
    "shape": "blast",
    "damage_type": "soul",
    "min_damage": { "math": [ "( (u_skill('swimming') * 0.66 ) + (u_skill('melee') * 0.66 ) + (u_skill('unarmed') * 0.66 ) + 14.67 )" ] },
    "max_damage": 40,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 150,
    "base_energy_cost": 133,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//": "The original spell mentions that this destroys walls, but I'm not sure how to limit it to that, plus maybe it's more interactive this way",
    "//2": " meiling_redrelease2 should have a red aoe field effect"
  },
  {
    "id": "meiling_redrelease2",
    "type": "SPELL",
    "name": { "str": "Red energy release (terrain bash)" },
    "description": "Bash effect for meiling_redrelease ",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "item" ],
    "effect": "bash",
    "shape": "blast",
    "damage_type": "bash",
    "min_damage": { "math": [ "( (u_skill('swimming') * 12 ) + (u_skill('melee') * 12 ) + (u_skill('unarmed') * 12 ) + 24 )" ] },
    "max_damage": 480,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA"
  },
  {
    "id": "meiling_stomp_effect",
    "type": "SPELL",
    "name": { "str": "Qi stomp (vfx)" },
    "description": "Visual effect for tec_meiling_stomp ",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "bash",
    "min_aoe": 1,
    "max_aoe": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS" ]
  },
  {
    "id": "meiling_tigerrelease",
    "type": "SPELL",
    "name": { "str": "Tiger qi release" },
    "description": "Activate some of your qi reserves to enhance your melee attacks.  Deactivates if you wield any item.  Reduces mana regen while active.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "meiling_tigerrelease_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE", "SOMATIC" ],
    "//": "The reduced mana is handled with the aura_tigerrelease effect, which adds a negative mana regen mutation, smaller than the SPIRIT_USER mutation"
  }
]
