[
  {
    "id": "kaenbyou_dismissfire",
    "type": "SPELL",
    "name": "Dismiss fire",
    "description": "Extinguish the targeted fire.",
    "spell_class": "NONE",
    "valid_targets": [ "field", "ground" ],
    "effect": "ter_transform",
    "effect_str": "dismiss_fire_field",
    "shape": "blast",
    "min_range": { "math": [ "( (u_skill('speech') * 0.2 ) + (u_skill('dodge') * 0.2 ) + 2.6 )" ] },
    "max_range": 8,
    "min_aoe": { "math": [ "( (u_skill('speech') * 0.2 ) + (u_skill('dodge') * 0.2 ) - 0.4 )" ] },
    "max_aoe": 5,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 150,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_LEGS", "NO_PROJECTILE", "SOMATIC" ],
    "//": "A different approach by Standing-Storm #71310 made this and yamame_webdismiss work",
    "//2": "min range 4, min aoe 1"
  },
  {
    "id": "kaenbyou_immolate",
    "type": "SPELL",
    "name": { "str": "Immolate" },
    "description": "Light the target with hellfire, instantly dealing a small amount of damage and much more over time.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kaenbyou_immolate2" } ],
    "shape": "blast",
    "damage_type": "heat",
    "min_damage": { "math": [ "( (u_skill('speech') * 1.7 ) + 4.2 )" ] },
    "max_damage": 28,
    "min_range": 12,
    "max_range": 12,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 150,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//2": "min dmg 11, min dur 1200"
  },
  {
    "id": "kaenbyou_immolate2",
    "type": "SPELL",
    "name": { "str": "Immolate (dot)" },
    "description": "Fire dot component of kaenbyou_immolate ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "attack",
    "effect_str": "immolate_light",
    "shape": "blast",
    "damage_type": "heat",
    "min_dot": { "math": [ "( (u_skill('speech') * 0.4 ) + 0.4 )" ] },
    "max_dot": 6,
    "min_pierce": { "math": [ "( (u_skill('speech') * 0.3 ) - 0.2 )" ] },
    "max_pierce": 4,
    "min_range": 12,
    "max_range": 12,
    "min_duration": { "math": [ "( (u_skill('speech') * 120 ) + 720 )" ] },
    "max_duration": 2400,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS" ],
    "//": "Ideally, the dot should have a flame field visual effect",
    "//2": "min dot 2, min pierce 1, min dur 1200. The granularity of small dots isn't the best"
  },
  {
    "id": "kaenbyou_infernoburst",
    "type": "SPELL",
    "name": { "str": "Inferno burst" },
    "description": "Cause a burst of hellfire at the target.  Deals extra damage if the target is inflicted with hellfire.",
    "spell_class": "NONE",
    "effect": "attack",
    "extra_effects": [ { "id": "kaenbyou_infernoburst2" } ],
    "valid_targets": [ "ally", "hostile" ],
    "shape": "blast",
    "damage_type": "heat",
    "min_damage": { "math": [ "( (u_skill('speech') * 1.8 ) + 5.8 )" ] },
    "max_damage": 31,
    "min_range": 12,
    "max_range": 12,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "min dmg 13"
  },
  {
    "id": "kaenbyou_infernoburst2",
    "type": "SPELL",
    "name": { "str": "Inferno burst (EOC)" },
    "description": "EOC check for kaenbyou_infernoburst double dmg",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_infernoburst_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_range": 12,
    "max_range": 12,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "kaenbyou_infernoburst3",
    "type": "SPELL",
    "name": { "str": "Inferno burst (extra)" },
    "description": "Extra (self) damage for the target of kaenbyou_immolate and kaenbyou_infernoburst ",
    "spell_class": "NONE",
    "effect": "attack",
    "valid_targets": [ "self" ],
    "shape": "blast",
    "damage_type": "heat",
    "min_damage": { "math": [ "( (u_skill('speech') * 1.8 ) + 5.8 )" ] },
    "max_damage": 31,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "Always the same dmg as kaenbyou_infernoburst "
  },
  {
    "id": "kaenbyou_blazingwheel",
    "type": "SPELL",
    "name": "Blazing wheel: Cataclysm",
    "description": "Channel for a short time, blasting the target location with a circle of hellfire, dealing damage after a delay and heavily burning them over time.  \nConsumes 2 soulshards.",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_blazingwheel_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 233,
    "base_energy_cost": 200,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kaenbyou_blazingwheel2",
    "type": "SPELL",
    "name": "Blazing wheel: Cataclysm",
    "description": "Channel for a short time, blasting the target location with a circle of hellfire, instantly dealing damage and heavily burning them over time.",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kaenbyou_blazingwheel3" }, { "id": "kaenbyou_consume_soulshard_2" } ],
    "shape": "blast",
    "damage_type": "heat",
    "min_damage": { "math": [ "( (u_skill('speech') * 6 ) - 4 )" ] },
    "max_damage": 80,
    "min_range": 12,
    "max_range": 12,
    "min_aoe": 3,
    "max_aoe": 3,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "CONCENTRATE", "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "min dmg 20"
  },
  {
    "id": "kaenbyou_blazingwheel3",
    "type": "SPELL",
    "name": "Blazing wheel (dot)",
    "description": "Fire dot component of kaenbyou_blazingwheel ",
    "spell_class": "NONE",
    "valid_targets": [ "hostile" ],
    "effect": "attack",
    "effect_str": "immolate_light",
    "shape": "blast",
    "damage_type": "heat",
    "min_dot": { "math": [ "( (u_skill('speech') * 0.9 ) + 0.4 )" ] },
    "max_dot": 13,
    "min_pierce": { "math": [ "( (u_skill('speech') * 0.4 ) + 0.4 )" ] },
    "max_pierce": 6,
    "min_duration": { "math": [ "( (u_skill('speech') * 120 ) + 720 )" ] },
    "max_duration": 2400,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS" ],
    "//": "min dot 4, min pierce 2, min dur 1200"
  },
  {
    "id": "kaenbyou_consume_soulshard_2",
    "type": "SPELL",
    "name": { "str": "Consume 2 soulshards" },
    "description": "Reduces the number of soulshards by 2 *after* casting the spell. The aoe is required as this is casted at the location, not by Kaenbyou",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_consume_soulshard_2_eoc",
    "shape": "blast",
    "min_aoe": 32,
    "max_aoe": 32,
    "max_level": 1,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "IGNORE_WALLS", "NO_FAIL", "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kaenbyou_soulfire",
    "type": "SPELL",
    "name": "Soulfire",
    "description": "Hurl a mass of unholy fire towards a target, which explodes burning their soul, and damaging any enemy nearby.  \nConsumes 1 soulshard.",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_soulfire_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 200,
    "base_energy_cost": 166,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kaenbyou_soulfire2",
    "type": "SPELL",
    "name": "Soulfire",
    "description": "Hurl a mass of unholy fire towards a target, which explodes burning their soul, and damaging any enemy nearby.",
    "spell_class": "NONE",
    "effect": "attack",
    "extra_effects": [ { "id": "kaenbyou_consume_soulshard" } ],
    "valid_targets": [ "ally", "hostile" ],
    "shape": "blast",
    "damage_type": "soul",
    "min_damage": { "math": [ "( (u_skill('speech') * 32 ) - 88 )" ] },
    "max_damage": 360,
    "min_range": { "math": [ "( (u_skill('speech') * 0.9 ) + 5.4 )" ] },
    "max_range": 18,
    "min_aoe": 1,
    "max_aoe": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "IGNITE_FLAMMABLE", "NO_LEGS", "SOMATIC" ],
    "//": "This spell is unrelated to Magiclysm's Soulfire. I just find the word really cool",
    "//2": "min dmg 40"
  },
  {
    "id": "kaenbyou_consume_soulshard",
    "type": "SPELL",
    "name": { "str": "Consume 1 soulshard" },
    "description": "Reduces the number of soulshards by 1 *after* casting the spell. The aoe is required as this is casted at the location, not by Kaenbyou",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_consume_soulshard_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 32,
    "max_aoe": 32,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "IGNORE_WALLS", "NO_FAIL", "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kaenbyou_soulshard_fuel2",
    "type": "SPELL",
    "name": { "str": "Soulshard to fuel" },
    "description": "Combine 8 soulshards into fuel for your cart.  \nConsumes 8 soulshards.",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_soulshard_fuel_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 300,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kaenbyou_soulshard_fuel",
    "type": "SPELL",
    "name": { "str": "Soulshard to fuel" },
    "description": "Combine 8 soulshards into fuel for your cart.  \nConsumes 8 soulshards.",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "spawn_item",
    "effect_str": "soulshard_fuel",
    "extra_effects": [ { "id": "kaenbyou_consume_soulshard_8" } ],
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "NO_PROJECTILE", "SOMATIC", "PERMANENT_ALL_LEVELS" ]
  },
  {
    "id": "kaenbyou_consume_soulshard_8",
    "type": "SPELL",
    "name": { "str": "Consume 8 soulshard" },
    "description": "Reduces the number of soulshards by 8 *after* casting the spell. The aoe is required as this is casted at the location, not by Kaenbyou",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_consume_soulshard_8_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 32,
    "max_aoe": 32,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "IGNORE_WALLS", "NO_FAIL", "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kaenbyou_soulshatter",
    "type": "SPELL",
    "name": { "str": "Soulshatter" },
    "description": "Break a soulshard to tamper with the senses of nearby creatures for a brief moment.  \nConsumes 1 soulshard.",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_soulshatter_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 100,
    "base_energy_cost": 66,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kaenbyou_soulshatter2",
    "type": "SPELL",
    "name": { "str": "Soulshatter" },
    "description": "Break a soulshard to tamper with the senses of nearby creatures for a brief moment.",
    "spell_class": "NONE",
    "effect": "attack",
    "effect_str": "stunned",
    "extra_effects": [ { "id": "kaenbyou_soulshatter3" }, { "id": "kaenbyou_consume_soulshard" } ],
    "valid_targets": [ "ally", "hostile" ],
    "shape": "blast",
    "damage_type": "pure",
    "min_duration": 100,
    "max_duration": 200,
    "min_aoe": { "math": [ "( (u_skill(speech) * 1.6 ) + 9.6 )" ] },
    "max_aoe": 32,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_EXPLOSION_SFX", "NO_LEGS", "SOMATIC", "RANDOM_DURATION" ],
    "//": "min aoe 16"
  },
  {
    "id": "kaenbyou_soulshatter3",
    "type": "SPELL",
    "name": { "str": "Soulshatter (effect)" },
    "description": "Self invis component for kaenbyou_soulshatter ",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "effect_str": "kaenbyou_soulshatter",
    "shape": "blast",
    "damage_type": "pure",
    "min_duration": { "math": [ "( (u_skill(speech) * 0.4 ) + 1.4 )" ] },
    "max_duration": 700,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "NO_PROJECTILE", "SOMATIC" ],
    "//2": "min dur 300"
  },
  {
    "id": "kaenbyou_vssummon",
    "type": "SPELL",
    "name": { "str": "Summon: Vengeful spirit" },
    "description": "Summon Vengeful spirits that follow you around.  They will happily help you in battle, either passively by attacking nearby enemies or as resource for more spells.",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile", "self" ],
    "effect": "summon",
    "effect_str": "mon_vengeful_spirit",
    "shape": "blast",
    "min_damage": { "math": [ "( (u_skill('speech') * 0.6 ) - 0.4 )" ] },
    "max_damage": 8,
    "min_range": 5,
    "max_range": 5,
    "min_aoe": 2,
    "max_aoe": 2,
    "min_duration": { "math": [ "( (u_skill('speech') * 360 ) - 240 )" ] },
    "max_duration": 4800,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 33,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "VERBAL" ],
    "//": "min dmg 2, min dur 1200"
  },
  {
    "id": "kaenbyou_vspossess",
    "type": "SPELL",
    "name": { "str": "Possession: Vengeful spirit" },
    "description": "Command any nearby vengeful spirits to possess the target.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "targeted_monster_species": [ "FERAL", "HUMAN", "NETHER", "ZOMBIE" ],
    "effect": "effect_on_condition",
    "effect_str": "kaenbyou_vspossess_eoc",
    "shape": "blast",
    "min_range": 5,
    "max_range": 5,
    "max_level": 1,
    "difficulty": -11,
    "message": "You command nearby vengeful spirits to take control!",
    "base_casting_time": 100,
    "base_energy_cost": 33,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "VERBAL" ],
    "//": "This just tags the target with the EOC",
    "//2": "Downstream effects are triggered by kaenbyou_vspossess_kill when the target dies and there's at least a vengeful spirit nearby"
  },
  {
    "id": "kaenbyou_vspossess2",
    "type": "SPELL",
    "name": { "str": "Possession: Vengeful spirit (kill monsters)" },
    "description": "Removes all mon_vengeful_spirit under the aoe",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "targeted_monster_ids": [ "mon_vengeful_spirit" ],
    "effect": "banishment",
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": 99,
    "max_damage": 99,
    "min_range": 64,
    "max_range": 64,
    "min_aoe": 3,
    "max_aoe": 3,
    "max_level": 1,
    "difficulty": -50,
    "message": "",
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_FAIL", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "kaenbyou_vsrelease",
    "type": "SPELL",
    "name": { "str": "Release: Vengeful spirit" },
    "description": "Release all gathered Vengeful spirits.  It's much less peaceful than it sounds though, as they explode dealing damage.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "targeted_monster_ids": [ "mon_vengeful_spirit" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kaenbyou_vsrelease2" } ],
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": 99,
    "max_damage": 99,
    "min_range": { "math": [ "( (u_skill('speech') * 0.8 ) + 4.8 )" ] },
    "max_range": 16,
    "min_aoe": 4,
    "max_aoe": 4,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 66,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "NO_PROJECTILE", "SOMATIC" ],
    "//": "The simplest way to make real use of the onryou. This kills all onryou, and triggers kaenbyou_vsrelease2 which is the actual damage component",
    "//2": "min range 8"
  },
  {
    "id": "kaenbyou_vsrelease2",
    "type": "SPELL",
    "name": { "str": "Release: Vengeful spirit (explosion)" },
    "description": "Explosion for kaenbyou_vsrelease ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "heat",
    "min_damage": { "math": [ "( (u_skill('speech') * 34 ) - 116 )" ] },
    "max_damage": 30,
    "min_pierce": { "math": [ "( (u_skill('speech') * 0.8 ) - 2.2 )" ] },
    "max_pierce": 9,
    "min_aoe": 1,
    "max_aoe": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_PROJECTILE", "RANDOM_AOE" ],
    "//": "min dmg 20, min pierce 1. Note: this is per onryou, 3 onryou exploding at lvl 1 = 60 aoe dmg, 8 onryou exploding at speech(14) = 360 aoe dmg"
  },
  {
    "id": "kaenbyou_zz_soulshard",
    "type": "SPELL",
    "name": "Soulshards",
    "description": "You gain soulshards by killing humanoids, which you can use to fuel some of your spells.  Casting time displays how many you currently have.  \nMax 16 soulshards.",
    "spell_class": "NONE",
    "valid_targets": [ "none" ],
    "effect": "attack",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": { "math": [ "u_var_soulshard" ] },
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_LEGS", "NO_PROJECTILE", "SOMATIC", "SILENT" ]
  }
]
